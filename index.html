<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>50-Minute Countdown Timer with Continuous Sound</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: transparent;
            color: #ff8921;
        }
        .countdown {
            font-size: 3rem;
            text-align: center;
            color: #ff8921;
            -webkit-text-stroke: 1px black;
            font-weight: bold;
            text-shadow: 0px 0px 8px black;
            margin-top: 20px;
        }
        .blink {
            animation: blink-animation 1s steps(2, start) infinite;
        }
        @keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }
        .buttons {
            margin-bottom: 20px;
            display: block;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 1rem;
            background-color: #ff8921;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0px 0px 5px black;
        }
        button:hover {
            opacity: 0.9;
        }
        #last-update {
            margin-top: 20px;
            font-size: 1rem;
            color: #ff8921;
        }
        .footer {
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #ff8921;
        }
    </style>
</head>
<body>
    <div class="countdown" id="countdown">
        50:00
    </div>
    <div class="buttons" id="button-container">
        <button onclick="pauseTimer()">Pause</button>
        <button onclick="resumeTimer()">Resume</button>
        <button onclick="restartTimer()">Restart</button>
        <button onclick="adjustTime(5)">+5 Min</button>
        <button onclick="adjustTime(1)">+1 Min</button>
        <button onclick="adjustTime(-1)">-1 Min</button>
        <button onclick="adjustTime(-5)">-5 Min</button>
        <button onclick="adjustTime(-10, 'sec')">-10 Sec</button>
        <button onclick="stopBeepSound()">Stop Sound</button>
    </div>
    <div id="last-update">
        Last updated: <span id="update-time"></span>
    </div>
    <div class="footer">
        &copy; 2025 MK Shaon
    </div>

    <script>
        let totalTime = 50 * 60; // 50 minutes in seconds
        let timerInterval;
        let isPaused = false;
        let beepInterval; // Interval for continuous beep sound
        let audioCtx; // AudioContext reference
        let oscillator; // Oscillator reference

        // Function to update countdown display
        function updateCountdownDisplay() {
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            document.getElementById('countdown').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // Function to update the "last update" time
        function updateLastUpdateTime() {
            const now = new Date();
            const formattedTime = now.toLocaleString();
            document.getElementById('update-time').textContent = formattedTime;
        }

        // Function to start the countdown timer
        function startTimer() {
            updateLastUpdateTime();
            timerInterval = setInterval(() => {
                if (!isPaused && totalTime > 0) {
                    totalTime--;
                    updateCountdownDisplay();
                }
                if (totalTime === 0) {
                    clearInterval(timerInterval);
                    document.getElementById('countdown').textContent = "Take a break!";
                    document.getElementById('countdown').classList.add('blink'); // Add blinking effect
                    startBeepSound(); // Start continuous beep sound when time's up
                }
            }, 1000);
        }

        // Function to pause the timer
        function pauseTimer() {
            isPaused = true;
            updateLastUpdateTime();
        }

        // Function to resume the timer
        function resumeTimer() {
            isPaused = false;
            updateLastUpdateTime();
        }

        // Function to restart the timer
        function restartTimer() {
            totalTime = 50 * 60; // Reset to 50 minutes
            isPaused = false;
            document.getElementById('countdown').classList.remove('blink'); // Remove blinking effect
            updateCountdownDisplay();
            updateLastUpdateTime();
        }

        // Function to adjust the time (in minutes or seconds)
        function adjustTime(amount, unit = 'min') {
            if (unit === 'sec') {
                totalTime += amount; // Adjust seconds
            } else {
                totalTime += amount * 60; // Adjust minutes
            }
            if (totalTime < 0) totalTime = 0; // Prevent negative time
            updateCountdownDisplay();
            updateLastUpdateTime();
        }

        // Function to start continuous beep sound
        function startBeepSound() {
            // Create an audio context if not already created
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();

            // Function to play the beep sound
            function playBeep() {
                oscillator = audioCtx.createOscillator();
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(1000, audioCtx.currentTime); // Beep frequency
                oscillator.connect(audioCtx.destination);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.1); // Short beep sound
            }

            beepInterval = setInterval(playBeep, 1000); // Play beep every second
        }

        // Function to stop the beep sound
        function stopBeepSound() {
            clearInterval(beepInterval);
            if (oscillator) {
                oscillator.disconnect(); // Stop oscillator
            }
        }

        // Start the countdown when the page is loaded
        window.onload = startTimer;
    </script>
</body>
</html>
